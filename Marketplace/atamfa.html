<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MD | Atamfa Elite Market</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --milk-bg: #E8E1D5; 
            --dark-chocolate: #1A0F0D; 
            --neon-gold: #D4AF37;
            --verified-blue: #00BAFF;
            --dark-milk-ads: #D2C9B8; /* Dark Milk color for ads */
        }

        body { background-color: var(--milk-bg); font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }

        /* ADS SECTION - NOT STATIC (Will scroll with page) */
        .ads-wrapper { 
            width: 100%; 
            overflow: hidden; 
            padding: 15px 0; 
            background: #120a09; /* Original dark background for the track area */
        }
        .ads-track { 
            display: flex; 
            gap: 12px; 
            padding-left: 15px; 
            animation: scroll-ads 45s linear infinite; 
        }
        @keyframes scroll-ads { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        .ad-card {
            min-width: 150px; height: 160px;
            background: var(--dark-milk-ads); /* Canja kalar background zuwa Dark Milk */
            border-radius: 20px; border: 1.5px solid var(--neon-gold);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative;
        }
        .ad-card i { font-size: 2rem; color: var(--neon-gold); margin-bottom: 8px; }
        .ad-card span { font-size: 0.7rem; color: var(--dark-chocolate); font-weight: 800; text-align: center; text-transform: uppercase; }

        /* MASONRY GRID SYSTEM - NO CHANGES MADE */
        .main-container { display: flex; gap: 8px; padding: 8px; align-items: flex-start; }
        .column { flex: 1; display: flex; flex-direction: column; gap: 8px; }

        .product-card {
            background: white; border-radius: 12px; overflow: hidden;
            display: flex; flex-direction: column; border: 0.5px solid rgba(0,0,0,0.08);
        }

        .first-box .img-area { height: 320px !important; }
        .standard-box .img-area { height: 240px; }

        .img-area { width: 100%; position: relative; background: #f0f0f0; }
        .img-area img { width: 100%; height: 100%; object-fit: cover; display: block; }

        .details-area { padding: 8px; }
        .p-name { font-size: 10.5px; color: #444; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .price-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
        .p-price { font-size: 14px; font-weight: 800; color: #000; }

        .stars-box { display: flex; align-items: center; gap: 2px; }
        .stars { color: #ff9900; font-size: 8px; display: flex; }
        .review-count { font-size: 8px; color: #999; }

        .trust-section {
            background: #f9f9f9; border-radius: 8px; padding: 5px;
            border: 0.5px solid #eee; margin-bottom: 6px;
        }
        .trust-line { display: flex; align-items: center; gap: 4px; font-size: 9px; font-weight: 700; }
        .loc-line { display: flex; align-items: center; gap: 4px; font-size: 8.5px; color: #777; margin-top: 2px; }
        .verified-icon { color: var(--verified-blue); font-size: 10px; }

        .btn-buy {
            background: var(--dark-chocolate); color: var(--neon-gold);
            width: 100%; padding: 8px; border-radius: 8px; font-size: 10px;
            font-weight: 800; border: 1.5px solid var(--neon-gold);
        }
    </style>
</head>
<body>

    <div class="ads-wrapper">
        <div class="ads-track">
            <div class="ad-card"><i class="fa-solid fa-wand-magic-sparkles"></i><span>Premium <br> Cotton Hub</span></div>
            <div class="ad-card" style="border-color: #00BAFF;"><i class="fa-solid fa-bolt-lightning" style="color:#00BAFF;"></i><span>Flash Sales <br> Live Now</span></div>
            <div class="ad-card"><i class="fa-solid fa-crown"></i><span>Royal <br> Vendor Space</span></div>
            <div class="ad-card"><i class="fa-solid fa-wand-magic-sparkles"></i><span>Premium <br> Cotton Hub</span></div>
            <div class="ad-card"><i class="fa-solid fa-crown"></i><span>Royal <br> Vendor Space</span></div>
        </div>
    </div>

    <div class="main-container" id="product-grid">
    </div>
    
    
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
        <script>
    
       // 1. Firebase Configuration
const firebaseConfig = {
  apiKey: "AIzaSyDJfUePiQV5R1YAcnq-zvfd3ty4lbzDs1M",
  authDomain: "global-market-admin.firebaseapp.com",
  projectId: "global-market-admin",
  storageBucket: "global-market-admin.firebasestorage.app",
  messagingSenderId: "259715265619",
  appId: "1:259715265619:web:313919773f57cc5fb9c2a6"
};

// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// 2. Duba abinda aka bincika
const searchWord = localStorage.getItem('currentSearch')?.toLowerCase().trim() || "atamfa";

async function fetchRealProducts() {
    const grid = document.querySelector('.main-container');
    const searchWord = localStorage.getItem('currentSearch')?.toLowerCase().trim() || "atamfa";
    
    // Share tsofaffin katinan karya
    grid.innerHTML = '<div class="column" id="col1"></div><div class="column" id="col2"></div>';

    try {
        const snapshot = await db.collection('products').where('category', '==', searchWord).get();

        let count = 0;
        snapshot.forEach(doc => {
            const p = doc.data();
            const colId = count % 2 === 0 ? 'col1' : 'col2';
            const column = document.getElementById(colId);
            
            // Amfani da exact template dinka
            const cardClass = count === 0 ? "first-box" : "standard-box";
            
            const cardHTML = `
                <div class="product-card ${cardClass}">
                    <div class="img-area"><img src="${p.img}" onerror="this.src='https://via.placeholder.com/300'"></div>
                    <div class="details-area">
                        <p class="p-name">${p.name.toUpperCase()}</p>
                        <div class="price-row">
                            <span class="p-price">₦${Number(p.price).toLocaleString()}</span>
                            <div class="stars-box">
                                <div class="stars"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                                <span class="review-count">(${p.reviews || '0'})</span>
                            </div>
                        </div>
                        <div class="trust-section">
                            <div class="trust-line"><i class="fa-solid fa-circle-check verified-icon"></i>TrustID Verified | ${getDays(p.date)}</div>
                            <div class="loc-line"><i class="fa-solid fa-location-dot text-red-600"></i>${p.location}</div>
                        </div>
                        <button class="btn-buy" onclick="orderViaWhatsApp('${p.name}', '${p.price}', '${p.vendorPhone}')">BUY NOW</button>
                    </div>
                </div>`;
            column.insertAdjacentHTML('beforeend', cardHTML);
            count++;
        });
    } catch (e) { console.error(e); }
    }
                

function renderProduct(p, colId) {
    const column = document.getElementById(colId);
    const cardHTML = `
        <div class="product-card standard-box">
            <div class="img-area"><img src="${p.img}"></div>
            <div class="details-area">
                <p class="p-name">${p.name}</p>
                <div class="price-row">
                    <span class="p-price">₦${p.price.toLocaleString()}</span>
                </div>
                <div class="trust-section">
                    <div class="trust-line"><i class="fa-solid fa-circle-check verified-icon"></i>Verified Vendor</div>
                    <div class="loc-line"><i class="fa-solid fa-location-dot text-red-600"></i>${p.location || 'Kano'}</div>
                </div>
                <button class="btn-buy" onclick="orderViaWhatsApp('${p.name}', ${p.price})">BUY NOW</button>
            </div>
        </div>`;
    column.insertAdjacentHTML('beforeend', cardHTML);
}

function orderViaWhatsApp(name, price) {
    const msg = `Sannu Vendor, ina son siyan ${name} akan farashin ₦${price}.`;
    window.open(`https://wa.me/2340000000000?text=${encodeURIComponent(msg)}`);
}

// Kunna binciken
document.addEventListener('DOMContentLoaded', fetchRealProducts);
            
    </script>
</body>
  </html>
