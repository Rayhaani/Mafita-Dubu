<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #05070a; color: white; padding: 20px; font-family: sans-serif; }
        .user-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>
    <h1 class="text-2xl font-bold text-[#D4AF37] mb-6">ADMIN DASHBOARD - USERS</h1>
    <div id="userList">Loading registrations...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDJfUePiQV5R1YAcnq-zvfd3ty4lbzDs1M",
            authDomain: "global-market-admin.firebaseapp.com",
            projectId: "global-market-admin",
            storageBucket: "global-market-admin.firebasestorage.app",
            messagingSenderId: "259715265619",
            appId: "1:259715265619:web:313919773f57cc5fb9c2a6"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        onSnapshot(collection(db, "users"), (snapshot) => {
            const list = document.getElementById('userList');
            list.innerHTML = "";
            snapshot.forEach((docSnap) => {
                const user = docSnap.data();
                const id = docSnap.id;
                list.innerHTML += `
                    <div class="user-card">
                        <div>
                            <p class="font-bold">${user.fullName} (${user.role})</p>
                            <p class="text-xs text-gray-400">${user.email} | ${user.location}</p>
                            <p class="text-xs ${user.status === 'pending' ? 'text-yellow-500' : 'text-green-500'} uppercase">${user.status}</p>
                        </div>
                        ${user.status === 'pending' ? `<button onclick="approve('${id}')" class="bg-green-600 px-3 py-1 rounded text-xs">APPROVE</button>` : ''}
                    </div>
                `;
            });
        });

        window.approve = async (id) => {
            await updateDoc(doc(db, "users", id), { status: 'approved' });
            alert("Approved!");
        };
    </script>
</body>
</html>
